<Page x:Class="ShippingManagerCoPilot.Installer.Pages.PathSelectionPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="{StaticResource BackgroundColor}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Main Content -->
        <StackPanel Grid.Row="0" Margin="40,15,40,20">
                <Grid Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Title -->
                    <TextBlock Grid.Column="0" Text="Choose Installation Location" FontSize="24" FontWeight="Bold"
                              Foreground="{StaticResource TextColor}" VerticalAlignment="Center"/>

                    <!-- Logo -->
                    <Image Grid.Column="1" Source="/icon.ico" Width="64" Height="64"
                          RenderOptions.BitmapScalingMode="HighQuality"/>
                </Grid>

                <!-- Installation Path Options -->
                <RadioButton x:Name="AppDataRadio" Content="AppData (Recommended)" IsChecked="True"
                           Style="{StaticResource ModernRadioButton}" GroupName="InstallPath"
                           Checked="InstallPathRadio_Changed"/>
                <TextBlock Text="No administrator rights required" FontSize="12"
                          Foreground="#9ca3af" Margin="25,0,0,5"/>
                <TextBlock x:Name="AppDataPath" FontSize="12" FontFamily="Consolas"
                          Foreground="#3b82f6" Margin="25,0,0,10"/>

                <RadioButton x:Name="ProgramFilesRadio" Content="Program Files"
                           Style="{StaticResource ModernRadioButton}" GroupName="InstallPath"
                           Checked="InstallPathRadio_Changed"/>
                <TextBlock Text="⚠️ Requires administrator privileges" FontSize="12"
                          Foreground="{StaticResource WarningColor}" Margin="25,0,0,5"/>
                <TextBlock x:Name="ProgramFilesPath" FontSize="12" FontFamily="Consolas"
                          Foreground="#3b82f6" Margin="25,0,0,10"/>

                <RadioButton x:Name="CustomRadio" Content="Custom Location"
                           Style="{StaticResource ModernRadioButton}" GroupName="InstallPath"
                           Checked="InstallPathRadio_Changed"/>
                <Grid Margin="25,5,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="CustomPath" Grid.Column="0" Padding="8" FontSize="12"
                            FontFamily="Consolas" IsEnabled="False"/>
                    <Button Content="Browse..." Grid.Column="1" Margin="10,0,0,0"
                           Click="BrowseButton_Click" IsEnabled="False" x:Name="BrowseButton"/>
                </Grid>

                <!-- Shortcuts -->
                <TextBlock Text="Shortcuts" FontSize="18" FontWeight="SemiBold"
                          Foreground="{StaticResource TextColor}" Margin="0,0,0,10"/>
                <CheckBox x:Name="DesktopShortcut" Content="Create Desktop Shortcut" IsChecked="True"
                         Style="{StaticResource ModernCheckBox}"/>
                <CheckBox x:Name="StartMenuShortcut" Content="Create Start Menu Entry" IsChecked="True"
                         Style="{StaticResource ModernCheckBox}" Margin="0,0,0,10"/>

                <!-- License Agreement -->
                <Border Background="{StaticResource CardBackground}" BorderBrush="{StaticResource BorderColor}" BorderThickness="1"
                       CornerRadius="6" Padding="10" Margin="0,5,0,0" MaxWidth="600" HorizontalAlignment="Left">
                    <StackPanel>
                        <CheckBox x:Name="LicenseCheckbox" IsChecked="False" Style="{StaticResource ModernCheckBox}">
                            <TextBlock TextWrapping="Wrap">
                                <Run Text="I accept the " Foreground="{StaticResource TextColor}"/>
                                <Hyperlink NavigateUri="https://github.com/sitzmoebelchronograph/shippingmanager_copilot/blob/main/LICENSE" RequestNavigate="LicenseHyperlink_RequestNavigate">
                                    <Run Text="License Agreement" Foreground="{StaticResource PrimaryColor}"/>
                                </Hyperlink>
                            </TextBlock>
                        </CheckBox>
                    </StackPanel>
                </Border>
        </StackPanel>

        <!-- Navigation -->
        <Border Grid.Row="1" Background="{StaticResource CardBackground}" BorderBrush="{StaticResource BorderColor}" BorderThickness="0,1,0,0" Padding="20">
            <Grid>
                <Button Content="← Back" Click="BackButton_Click" Padding="20,12"
                       Style="{StaticResource ModernButton}" HorizontalAlignment="Left"/>
                <Button x:Name="InstallButton" Content="Install" Click="InstallButton_Click" Padding="40,12"
                       Style="{StaticResource ModernButton}" HorizontalAlignment="Right"/>
            </Grid>
        </Border>
    </Grid>
</Page>
